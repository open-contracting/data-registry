{% extends 'base.html' %}
{% load i18n %}
{% load humanize %}
{% load static %}

{% block content %}
    <div id="detail_app" v-cloak>
        <div class="row">
            <div class="col col-12">
                <img class="logo" src="{% static 'img/logo.svg' %}">
            </div>
        </div>

        <div class="row">
            <div class="col col-12">
                <a href="{% url 'search' %}" class="link-back">
                    <b-iconstack class="mr-2 icon">
                        <b-icon stacked class="circle" icon="circle-fill"></b-icon>
                        <b-icon stacked class="chevron" icon="chevron-left" scale="0.6"></b-icon>
                    </b-iconstack>

                    <span>{% translate "BACK TO DATASETS SEARCH" %}</span>
                </a>
            </div>
        </div>

        <div class="row">
            <div class="col-auto">
                <div class="flag"></div>
            </div>
            <div class="col">
                <h2>[[ data.country ]] [[ data.title ]] <span class="badge badge-pill collection-badge">{% translate "OCDS" %}</span></h2>
                <p class="description">[[ data.description ]]</p>
            </div>
            <div class="col">
                <div class="label">{% translate "Available formats:" %}</div>
                <div class="formats">
                    <div class="format-json"><b-icon icon="check-circle" class="mr-2"></b-icon> JSON</div>
                    <div class="format-excel"><b-icon icon="x-circle" class="mr-2"></b-icon> EXCEL</div>
                </div>
            </div>
            <div class="col-auto">
                <a class="btn btn-primary btn-lg" href="{% url 'search' %}">
                    <b-iconstack class="mr-2 icon">
                        <b-icon stacked class="circle" icon="circle-fill"></b-icon>
                        <b-icon stacked class="chevron" icon="chevron-right" scale="0.6"></b-icon>
                    </b-iconstack>
                    {% translate "ACCESS" %}
                </a>
            </div>
        </div>

        <div class="row section">
            <div class="col-3">
                <h4>{% translate "Overview" %}</h4>
            </div>
            <div class="col-9">
                <div>
                    <span class="label">{% translate "Data date range:" %}</span>
                    <span class="value">[[ data.date_from | moment("MMM YYYY") ]] - [[ data.date_to | moment("MMM YYYY") ]]</span>
                </div>
                <div>
                    <span class="label">{% translate "Last updated:" %}</span>
                    <span class="value">[[ data.last_update | moment("MMM YYYY") ]]</span>
                </div>
                <div>
                    <span class="label">{% translate "Update frequency:" %}</span>
                    <span class="value">
                        <template v-if="data.update_frequency == 'MONTHLY'">{% translate "Monthly" %}</template>
                        <template v-else-if="data.update_frequency == 'HALF_YEARLY'">{% translate "Every 6 months" %}</template>
                        <template v-else-if="data.update_frequency == 'ANNUALLY'">{% translate "Annually" %}</template>
                    </span>
                </div>
                <div>
                    <span class="label">{% translate "OCID prefix:" %}</span>
                    <span class="value">[[ data.ocds_prefix ]]</span>
                </div>
                <div>
                    <span class="label">{% translate "License:" %}</span>
                    <span class="value">[[ data.license ]]</span>
                </div>
            </div>
        </div>

        <div class="row section">
            <div class="col-3">
                <h4>{% translate "Data avaliable" %}</h4>
            </div>
            <div class="col-9"></div>
        </div>

        <div class="row section">
            <div class="col-3">
                <h4>{% translate "Data quality" %}</h4>
            </div>
            <div class="col-9"></div>
        </div>
    </div>

    {{ data|json_script:"detail-data" }}

    <script type="text/javascript">
        const DATA = JSON.parse(document.getElementById('detail-data').textContent)
    </script>
{% endblock %}